<!DOCTYPE html>
<html>
<head>
  <style>


  </style>

<title>Map Wars</title>
</head>
<body onload="fetchGet();">



  <img id="image" src="https://map-refinery.s3-us-west-2.amazonaws.com/Europe.gif" onclick="fillCountry(event,this);">

</body>

<script>
var display="";
var posX=0;
var posY=0;
var mapPoints = []; // create an empty array
const url = 'https://9nxm1uir3d.execute-api.us-west-2.amazonaws.com/refinery/replaceme/tundrastingerreaper'
const refineryEndpointUrl = 'https://9nxm1uir3d.execute-api.us-west-2.amazonaws.com/refinery/mapImage';  

  function fillCountry(event, img) {
        posX = event.offsetX?(event.offsetX):event.pageX-img.offsetLeft;
        posY = event.offsetY?(event.offsetY):event.pageY-img.offsetTop; 
        fetchPost([posX, posY])   
        fetchGet()
        
    }


  async function fetchPost(data) {
    await fetch(url, {  
      method: 'POST',  
      cors: true,
      body: JSON.stringify(
        data
      )
    })   
  }

  
  async function fetchGet() {
    const response = await fetch(refineryEndpointUrl);
    const data = await response.json();
    await document.getElementById("image").src = data;
  }


  

</script>

</html>


<!--
  <div class = "info">
    Countries:
    <p id="countries" ></p>
  </div>

      div.info{
        position: absolute;
        right: 400px;
        width: 100px;
        height: 120px;
    }

  blank  map
  https://map-refinery.s3-us-west-2.amazonaws.com/Europe.gif

-->
















