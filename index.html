<!DOCTYPE html>
<html>
  <head>

    
  </head>
  <body>
    <p id ="keys_pressed"></p>



    <div class = 'forward_button'>
      <button onclick= "forward()" class="button" id="foward">↑</button>
    </div>

    <button onclick= "left()" class="button" id="left">←</button>
    <button onclick= "backwards()" class="button" id="backwards">↓</button>
    <button onclick= "right()" class="button" id="right">→</button>
    

  </body>
  <script  type="text/javascript">
    
    document.addEventListener('keydown', keyDownHandler, false);
    document.addEventListener('keyup', keyUpHandler, false);

    var rightPressed = false;
    var leftPressed = false;
    var upPressed = false;
    var downPressed = false;







      function forward(){
        url =  '/Forward';
        data =  fetchPost(url, {"direction": "n"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function left(){
        url =  '/Left';
        data =  fetchPost(url, {"direction": "w"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function right(){
        url =  '/Right';
        data =  fetchPost(url, {"direction": "e"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function backwards(){
        url =  '/Backwards';
        data =  fetchPost(url, {"direction": "s"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  


      function EndForward(){
        url =  '/EndForward';
        data =  fetchPost(url, {"direction": "n"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function EndLeft(){
        url =  '/EndLeft';
        data =  fetchPost(url, {"direction": "w"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function EndRight(){
        url =  '/EndRight';
        data =  fetchPost(url, {"direction": "e"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }  

      function EndBackwards(){
        url =  '/EndBackwards';
        data =  fetchPost(url, {"direction": "s"})
            .then(data => document.getElementById("keys_pressed").innerHTML = JSON.stringify(data))
            .catch(error => console.error(error));
      }

      function fetchPost(url, data) {
        return fetch(url, {  
          method: 'POST',  
          cors: true,
          body: JSON.stringify(
            data
          )
        }).then(response => response.text());   
      }




    function keyDownHandler(event) {
        if(event.keyCode == 39) {
            rightPressed = true;
            right();
        }
        else if(event.keyCode == 37) {
            leftPressed = true;
            left();
        }
        if(event.keyCode == 40) {
            downPressed = true;
            backwards();
        }
        else if(event.keyCode == 38) {
            upPressed = true;
            forward();
        }
    }

    function keyUpHandler(event) {
        if(event.keyCode == 39) {
            rightPressed = false;
            EndRight()
        }
        else if(event.keyCode == 37) {
            leftPressed = false;
            EndLeft()
        }
        if(event.keyCode == 40) {
            downPressed = false;
            EndBackwards()
        }
        else if(event.keyCode == 38) {
            upPressed = false;
            EndForward()
        }
    }



  </script>

    <style>
      .forward_button{
        margin-left: 79px;
        margin-bottom: 10px; 
      }
      .button {
        padding: 15px 25px;
        font-size: 24px;
        text-align: center;
        cursor: pointer;
        outline: none;
        color: #fff;
        background-color: #d3d3d3;
        border: none;
        border-radius: 15px;
        box-shadow: 0 9px #999;
      }

      .button:hover {background-color: #d3d3d3}

      .button:active {
        background-color: #d3d3d3;
        box-shadow: 0 5px #666;
        transform: translateY(4px);
      }
    </style>
</html>

<!--

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

$(document).ready(function() {
        console.log("===============================================================================")
        $("#foward").click(function(e) {
          $.post("/generator", {"direction": "n"})
           .done(function(string) {
          });
          e.preventDefault();
        });
      });
-->